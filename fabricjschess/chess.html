const canvas = new fabric.Canvas('chessCanvas');

// Chessboard dimensions
const tileSize = 100;
const boardSize = 8;

// Colors for chessboard tiles
const lightColor = '#f0d9b5';
const darkColor = '#b58863';

// Draw the chessboard
for (let row = 0; row < boardSize; row++) {
  for (let col = 0; col < boardSize; col++) {
    const color = (row + col) % 2 === 0 ? lightColor : darkColor;
    const rect = new fabric.Rect({
      left: col * tileSize,
      top: row * tileSize,
      width: tileSize,
      height: tileSize,
      fill: color,
      selectable: false,
    });
    canvas.add(rect);
  }
}

// Create a chess piece (example: white pawn)
const pieceSize = tileSize * 0.8;
const whitePawn = new fabric.Circle({
  left: tileSize * 3.1,
  top: tileSize * 6.1,
  radius: pieceSize / 2,
  fill: 'white',
  originX: 'center',
  originY: 'center',
  hasControls: false,
  hasBorders: false,
});

canvas.add(whitePawn);

// Add drag-and-drop functionality
canvas.on('object:moving', (e) => {
  const obj = e.target;

  // Snap to grid
  obj.left = Math.round(obj.left / tileSize) * tileSize + tileSize * 0.1;
  obj.top = Math.round(obj.top / tileSize) * tileSize + tileSize * 0.1;
});

// Add logic for piece movement and capturing here...
